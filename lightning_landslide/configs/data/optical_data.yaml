# =============================================================================
# configs/data/optical_data.yaml - 数据配置
# =============================================================================

# 数据路径配置
data:
  # 基础路径
  train_data_dir: "dataset/train_data"     # 训练数据目录
  test_data_dir: "dataset/test_data"       # 测试数据目录（可选）
  train_csv: "dataset/Train.csv"           # 训练标签文件
  test_csv: "dataset/Test.csv"             # 测试标签文件
  exclude_ids_file: "dataset/data_check/exclude_ids.json"  # 低质量样本列表

  channel_config:
    total_channels: 13
    channel_groups:
      optical: [0, 1, 2, 3]          # R, G, B, NIR
      sar_amplitude: [4, 5, 8, 9]    # SAR幅度图
      sar_difference: [6, 7, 10, 11] # SAR差值图
      derived: ["ndvi"]              # 计算得出的通道

  # 定义不同的使用模式
  usage_modes:
    optical_only: 
      groups: ["optical", "derived"]
    full_multimodal:
      groups: ["optical", "derived", "sar_amplitude", "sar_difference"]
    sar_focused:
      groups: ["sar_amplitude", "sar_difference"]
  
  # 数据加载配置
  batch_size: 64
  num_workers: 8
  pin_memory: true # 是否将数据加载到固定内存位置
  shuffle_train: true # 是否在训练时打乱数据
  
  # 数据分割配置
  val_split: 0.2                           # 验证集比例
  stratify: true                           # 是否分层采样
  use_weighted_sampling: false             # 是否使用加权采样处理类别不平衡
  
  # 数据变换配置
  transforms:
    # 标准化参数（需要根据您的数据统计调整）
    normalization:
      means: [1849.282, 1953.906, 1896.493, 3291.47, -9.624, -17.110, -0.699, -0.483, -10.671, -18.442, 0.248, -0.234]  # 12通道均值
      stds: [1414.462, 1338.292, 1342.528, 1448.362, 7.904, 9.245, 4.062, 4.283, 6.333, 8.691, 2.777, 3.932]            # 12通道标准差
    
    # 训练时数据增强
    train:
      # 几何变换
      random_flip: true
      h_flip_prob: 0.5
      v_flip_prob: 0.5
      
      random_rotation: true
      rotation_prob: 0.5
      
      # 光谱增强
      spectral_noise: true
      noise_std: 0.01
      noise_prob: 0.5
      
      # 大气效应模拟（高级增强，可选）
      atmospheric_scattering: false
      scattering_strength: 0.1
      scattering_prob: 0.3
      
      # NDVI保持增强
      ndvi_preserving: true
      intensity_range: [0.8, 1.2]
      ndvi_aug_prob: 0.4
    
    # 验证和测试时只标准化
    val:
      normalization_only: true

# 数据质量控制
quality_control:
  validate_on_setup: true                  # 设置时是否验证数据
  max_validation_samples: 100              # 最大验证样本数